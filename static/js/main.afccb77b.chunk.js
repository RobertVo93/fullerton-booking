(this["webpackJsonpfullerton-booking"]=this["webpackJsonpfullerton-booking"]||[]).push([[0],{19:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(14),i=a(207),o=a.n(i),s=a(74),c=new(function(){function e(t){Object(n.a)(this,e),this.api=void 0,this.api=o.a.create(t),this.getUri=this.getUri.bind(this),this.request=this.request.bind(this),this.get=this.get.bind(this),this.delete=this.delete.bind(this),this.head=this.head.bind(this),this.post=this.post.bind(this),this.put=this.put.bind(this),this.patch=this.patch.bind(this)}return Object(r.a)(e,[{key:"getUri",value:function(e){return this.api.getUri(e)}},{key:"request",value:function(e){return this.api.request(e)}},{key:"get",value:function(e,t){return this.api.get(e,t)}},{key:"delete",value:function(e,t){return this.api.delete(e,t)}},{key:"head",value:function(e,t){return this.api.head(e,t)}},{key:"post",value:function(e,t,a){return this.api.post(e,t,a)}},{key:"put",value:function(e,t,a){return this.api.put(e,t,a)}},{key:"patch",value:function(e,t,a){return this.api.patch(e,t,a)}},{key:"success",value:function(e){return e.data}},{key:"error",value:function(e){throw e}}]),e}())(s.a)},195:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={originalListFields:{},listFields:{},errors:{},disableSubmitButton:!0}},196:function(e,t){},197:function(e,t,a){"use strict";var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37);o.a},198:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37),c=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).controlType="",r.type=void 0,r.type=e.type||"",r.controlType=(new s.a).questionControlType.textarea,r}return a}(o.a)},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37),c=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).controlType="",r.type=void 0,r.type=e.type||"",r.controlType=(new s.a).questionControlType.textbox,r}return a}(o.a)},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37),c=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).controlType="",r.controlType=(new s.a).questionControlType.reference,r}return a}(o.a)},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37),c=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).controlType="",r.controlType=(new s.a).questionControlType.datetime,r}return a}(o.a)},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(10),r=a(16),i=a(15),o=a(41),s=a(37),c=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).controlType="",r.options=[],r.options=e.options||[],r.controlType=(new s.a).questionControlType.radiobutton,r}return a}(o.a)},203:function(e,t,a){"use strict";a.d(t,"a",(function(){return Y}));var n=a(10),r=a(14),i=a(11),o=a(16),s=a(15),c=a(24),l=a(0),u=a.n(l),d=a(25),p=a(37),h=a(208),m=a.n(h),f=(a(278),{referenceKey:"",originalDateTime:void 0,dateTime:void 0});a(279);function v(){var e=Object(c.a)(["\n    display: inline-block;\n    width: 100%;\n"]);return v=function(){return e},e}function g(){var e=Object(c.a)(["\n    width: 100%;\n"]);return g=function(){return e},e}var b=d.a.div(g()),y=d.a.div(v()),k=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state=f,r.handleChangeDateTime=r.handleChangeDateTime.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.dateTime?this.props.dateTime:void 0;this.setState({referenceKey:this.props.referenceKey,dateTime:e,originalDateTime:this.props.dateTime?JSON.parse(JSON.stringify(e)):void 0})}},{key:"componentDidUpdate",value:function(){this.props.dateTime&&JSON.stringify(this.state.originalDateTime)!==JSON.stringify(this.props.dateTime)&&this.setState({dateTime:this.props.dateTime,originalDateTime:JSON.parse(JSON.stringify(this.props.dateTime))})}},{key:"handleChangeDateTime",value:function(e){var t=this;console.log(e),this.setState({dateTime:e},(function(){t.props.onSelectionChange(t.state)}))}},{key:"render",value:function(){return u.a.createElement(b,null,u.a.createElement(y,null,u.a.createElement(m.a,{dateFormat:"yyyy/MM/dd, HH:mm",minDate:new Date,selected:this.state.dateTime,showTimeSelect:!0,timeFormat:"HH:mm",onChange:this.handleChangeDateTime})))}}]),a}(u.a.Component),w=a(411),E=a(413),O=a(409),S=a(131),C=a.n(S),j=a(135),T=a.n(j),D={dropdownKey:"",originalSelected:null,selected:null,searchKey:""},F=(a(335),u.a.createElement(C.a,{fontSize:"small"})),x=u.a.createElement(T.a,{fontSize:"small"}),R=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state=D,r.onCloseDropdown=r.onCloseDropdown.bind(Object(i.a)(r)),r.onChangeDropdown=r.onChangeDropdown.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.selected;this.props.selected&&(e=this.props.selected),this.props.multiple&&(e=[],this.props.options.forEach((function(t){e&&1===e.filter((function(e){return e.key===t.key})).length&&e.push(t)}))),this.setState({selected:e,originalSelected:JSON.parse(JSON.stringify(e)),dropdownKey:this.props.dropdownKey})}},{key:"componentDidUpdate",value:function(){var e=this;if(JSON.stringify(this.state.originalSelected)!==JSON.stringify(this.props.selected)){var t=this.props.selected;this.props.multiple&&(t=[],this.props.options.forEach((function(a){e.props.selected&&1===e.props.selected.filter((function(e){return e.key===a.key})).length&&t.push(a)}))),this.setState({selected:t,originalSelected:JSON.parse(JSON.stringify(t))})}}},{key:"onCloseDropdown",value:function(e,t){this.props.onSelectionChange(this.state)}},{key:"onChangeDropdown",value:function(e,t,a){var n=this;this.setState({selected:t},(function(){n.props.onSelectionChange(n.state)}))}},{key:"render",value:function(){var e=this;return u.a.createElement(O.a,{multiple:this.props.multiple,id:"autocomplete-box",className:"font-theme",value:this.props.multiple&&!this.state.selected?[]:this.state.selected,onClose:this.onCloseDropdown,onChange:this.onChangeDropdown,options:this.props.options,disableCloseOnSelect:this.props.multiple,autoSelect:!0,autoHighlight:!0,getOptionLabel:function(e){return e.value?e.value:""},renderOption:function(t,a){var n=a.selected;return u.a.createElement(u.a.Fragment,null,e.props.multiple?u.a.createElement(w.a,{icon:F,checkedIcon:x,style:{marginRight:8},checked:n}):"",u.a.createElement("span",null,t.value))},style:{width:"100%"},renderInput:function(e){return u.a.createElement(E.a,Object.assign({},e,{variant:"outlined",label:"Please select items",placeholder:"Search for items ..."}))}})}}]),a}(u.a.Component),B=a(416),N=a(395),L=a(410),H=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={value:null,referenceKey:r.props.referenceKey},r.handleChange=r.handleChange.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"handleChange",value:function(e){var t=this;this.setState({value:e.target.value},(function(){t.props.onSelectionChange(t.state)}))}},{key:"render",value:function(){var e;return u.a.createElement(B.a,{"aria-label":"gender",name:"gender1",value:this.state.value,onChange:this.handleChange},null===(e=this.props.options)||void 0===e?void 0:e.map((function(e){return u.a.createElement(N.a,{value:JSON.stringify(e),key:"".concat(e.key,"_radioButton"),control:u.a.createElement(L.a,null),label:e.value})})))}}]),a}(u.a.Component),M=a(13),A=a.n(M),U=a(27),q=(a(336),{referenceKey:"",originalSelected:null,selected:null,data:[]}),P=a(19),Q=function(){function e(t){Object(n.a)(this,e),this.getByUrl=this.getByUrl.bind(this)}return Object(r.a)(e,[{key:"getByUrl",value:function(){var e=Object(U.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get(t);case 3:return a=e.sent,e.abrupt("return",P.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=a(74),I=u.a.createElement(C.a,{fontSize:"small"}),J=u.a.createElement(T.a,{fontSize:"small"}),K=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).referenceService=void 0,r.state=q,r.referenceService=new Q(_.a),r.onCloseDropdown=r.onCloseDropdown.bind(Object(i.a)(r)),r.onChangeDropdown=r.onChangeDropdown.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=Object(U.a)(A.a.mark((function e(){var t,a,n,r=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.selected,this.props.selected&&(t=this.props.selected),e.next=4,this.referenceService.getByUrl(this.props.serverUrl);case 4:a=e.sent,n=[],a.forEach((function(e){delete e.createdBy,delete e.createdDate,delete e.updatedBy,delete e.updatedDate;var t=JSON.parse(JSON.stringify(e));if(r.props.listFields){for(var a in t)-1===r.props.listFields.indexOf(a)&&"_id"!==a&&a!==r.props.displayField&&delete t[a];n.push(t)}})),this.props.multiple&&(t=[],n.forEach((function(e){t&&1===t.filter((function(t){return t._id===e._id})).length&&t.push(e)}))),this.setState({selected:t,originalSelected:JSON.parse(JSON.stringify(t)),referenceKey:this.props.referenceKey,data:n});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this;if(JSON.stringify(this.state.originalSelected)!==JSON.stringify(this.props.selected)){var t=this.props.selected;this.props.multiple&&(t=[],this.state.data.forEach((function(a){e.props.selected&&1===e.props.selected.filter((function(e){return e._id===a._id})).length&&t.push(a)}))),this.setState({selected:t,originalSelected:JSON.parse(JSON.stringify(t))})}}},{key:"onCloseDropdown",value:function(e,t){this.props.onSelectionChange(this.state)}},{key:"onChangeDropdown",value:function(e,t,a){var n=this;this.setState({selected:t},(function(){n.props.onSelectionChange(n.state)}))}},{key:"render",value:function(){var e=this;return u.a.createElement(O.a,{multiple:this.props.multiple,id:"autocomplete-box",className:"font-theme",value:this.props.multiple&&!this.state.selected?[]:this.state.selected,onClose:this.onCloseDropdown,onChange:this.onChangeDropdown,options:this.state.data,disableCloseOnSelect:this.props.multiple,autoSelect:!0,autoHighlight:!0,getOptionLabel:function(t){return t[e.props.displayField]},renderOption:function(t,a){var n=a.selected;return u.a.createElement(u.a.Fragment,null,e.props.multiple?u.a.createElement(w.a,{icon:I,checkedIcon:J,style:{marginRight:8},checked:n}):"",Object.keys(t).filter((function(e){return"_id"!==e})).map((function(e,a){return u.a.createElement("span",{className:"font-theme",style:{paddingRight:"10px"},key:a},t[e])})))},style:{width:"100%"},renderInput:function(e){return u.a.createElement(E.a,Object.assign({},e,{variant:"outlined",label:"Please select items",placeholder:"Search for items ..."}))}})}}]),a}(u.a.Component);function V(){var e=Object(c.a)(["\n"]);return V=function(){return e},e}var G=d.a.div(V()),z={color:"red",fontStyle:"italic"},W={margin:0},Y=function(e){Object(o.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).formConfig=void 0,r.formConfig=new p.a,r.state={originalListFields:{},listFields:{},errors:{},disableSubmitButton:!0},r.renderErrorMessage=r.renderErrorMessage.bind(Object(i.a)(r)),r.renderQuestion=r.renderQuestion.bind(Object(i.a)(r)),r.validateForm=r.validateForm.bind(Object(i.a)(r)),r.handleChange=r.handleChange.bind(Object(i.a)(r)),r.onSelectionChangeCallback=r.onSelectionChangeCallback.bind(Object(i.a)(r)),r.onSelectionReferenceListChange=r.onSelectionReferenceListChange.bind(Object(i.a)(r)),r.onselectionDateTimeChange=r.onselectionDateTimeChange.bind(Object(i.a)(r)),r.onRadioSelectionChange=r.onRadioSelectionChange.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e={};this.props.ListFields.forEach((function(t){e[t.key]=t.value})),this.setState({listFields:e,originalListFields:JSON.parse(JSON.stringify(e))})}},{key:"componentDidUpdate",value:function(){var e=this,t={};this.props.ListFields.forEach((function(e){t[e.key]=e.value})),JSON.stringify(this.state.originalListFields)!==JSON.stringify(t)&&this.setState({listFields:t,originalListFields:JSON.parse(JSON.stringify(t))},(function(){var t=e.validateForm(),a=t.errors,n=!t.valid;e.setState({disableSubmitButton:n,errors:a})}))}},{key:"onselectionDateTimeChange",value:function(e){var t=this,a=this.state.listFields,n=e.dateTime;a[e.referenceKey]=n,this.setState({listFields:a},(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"onSelectionReferenceListChange",value:function(e){var t=this,a=this.state.listFields;a[e.referenceKey]=e.selected,this.setState({listFields:a},(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"onSelectionChangeCallback",value:function(e){var t=this,a=this.state.listFields;a[e.dropdownKey]=e.selected,this.setState({listFields:a},(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"onRadioSelectionChange",value:function(e){var t=this,a=this.state.listFields;a[e.referenceKey]=e.value?JSON.parse(e.value):e.value,this.setState({listFields:a},(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value,i=this.state.listFields;i[n]=r,this.setState({listFields:i},(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"validateForm",value:function(){var e=this,t=!0,a={};for(var n in this.props.ListFields.forEach((function(t){switch(a[t.key]=[],t.controlType){case e.formConfig.questionControlType.textbox:case e.formConfig.questionControlType.textarea:for(var r in t.validators)switch(r){case e.formConfig.formValidators.require:e.state.listFields[t.key]&&""!==e.state.listFields[t.key]||a[t.key].push(t.validators[r].errorMessage);break;case e.formConfig.formValidators.minLength:e.state.listFields[t.key]&&e.state.listFields[t.key].length>=t.validators[n].value||a[t.key].push(t.validators[r].errorMessage);break;case e.formConfig.formValidators.maxLength:e.state.listFields[t.key]&&e.state.listFields[t.key].length<=t.validators[n].value||a[t.key].push(t.validators[r].errorMessage)}break;case e.formConfig.questionControlType.reference:for(var i in t.validators)switch(i){case e.formConfig.formValidators.require:e.state.listFields[t.key]&&null!=e.state.listFields[t.key]._id||a[t.key].push(t.validators[i].errorMessage)}break;case e.formConfig.questionControlType.dropdown:for(var o in t.validators)switch(o){case e.formConfig.formValidators.require:e.state.listFields[t.key]&&e.state.listFields[t.key].key&&0!==e.state.listFields[t.key].key||a[t.key].push(t.validators[o].errorMessage)}break;case e.formConfig.questionControlType.datetime:for(var s in t.validators)switch(s){case e.formConfig.formValidators.require:e.state.listFields[t.key]||a[t.key].push(t.validators[s].errorMessage)}break;case e.formConfig.questionControlType.radiobutton:for(var c in t.validators)switch(c){case e.formConfig.formValidators.require:e.state.listFields[t.key]||a[t.key].push(t.validators[c].errorMessage)}}})),a)if(a[n].length>0){t=!1;break}return{errors:a,valid:t}}},{key:"renderErrorMessage",value:function(e){var t=this.state.errors[e];if(t)return u.a.createElement("div",{style:z},t.map((function(e,t){return u.a.createElement("div",{key:t},u.a.createElement("span",null,e))})))}},{key:"renderQuestion",value:function(e){switch(e.controlType){case this.formConfig.questionControlType.textbox:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement("input",{className:"form-control",onChange:this.handleChange,readOnly:e.readonly,type:e.type,name:e.key,value:this.state.listFields[e.key]||"",id:e.key}),this.renderErrorMessage(e.key));case this.formConfig.questionControlType.textarea:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement("textarea",{className:"form-control",onChange:this.handleChange,readOnly:e.readonly,rows:e.rows,name:e.key,value:this.state.listFields[e.key],id:e.key}),this.renderErrorMessage(e.key));case this.formConfig.questionControlType.dropdown:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement(R,{selected:e.value,dropdownKey:e.key,onSelectionChange:this.onSelectionChangeCallback,options:e.options,multiple:e.multiple}),this.renderErrorMessage(e.key));case this.formConfig.questionControlType.reference:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement(K,{serverUrl:e.serverUrl,displayField:e.displayField,listFields:e.listFields,filterCondition:e.filterCondition,referenceKey:e.key,selected:e.value,onSelectionChange:this.onSelectionReferenceListChange,multiple:e.multiple}),this.renderErrorMessage(e.key));case this.formConfig.questionControlType.datetime:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement(k,{referenceKey:e.key,dateTime:e.value,onSelectionChange:this.onselectionDateTimeChange}),this.renderErrorMessage(e.key));case this.formConfig.questionControlType.radiobutton:return u.a.createElement("fieldset",{key:e.key,className:"form-group"},u.a.createElement("label",{htmlFor:e.key},u.a.createElement("span",{hidden:!e.validators.required,style:z},"* "),u.a.createElement("span",{"data-text":e.label},e.label)),u.a.createElement(H,{onSelectionChange:this.onRadioSelectionChange,referenceKey:e.key,options:e.options}),this.renderErrorMessage(e.key))}}},{key:"render",value:function(){var e=this;return u.a.createElement(G,null,u.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.OnSubmitCallback(e.state)}},this.props.ListFields.map((function(t,a){return e.renderQuestion(t)})),u.a.createElement("input",{style:W,type:"submit",value:"Submit",disabled:this.state.disableSubmitButton,className:"btn btn-primary btn-block"})))}}]),a}(u.a.Component)},242:function(e,t,a){e.exports=a(345)},252:function(e,t,a){},254:function(e,t,a){},279:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},338:function(e,t,a){},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),o=a.n(i),s=a(34);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(205),l=(a(251),a(252),a(13)),u=a.n(l),d=a(27),p=a(10),h=a(14),m=a(11),f=a(16),v=a(15),g=a(32),b=a(36),y=(a(254),a(47)),k=a(24),w=a(25),E={firstName:"",lastName:"",email:"",password:"",repassword:"",roles:[],redirectLoginPage:!1,disableSubmitButton:!0,errors:{firstName:"First Name is required",lastName:"Last Name is required",email:"Email is required",password:"Password is required",repassword:"Re-Password is required"},mandatoryFields:{firstName:!0,lastName:!0,email:!0,password:!0,repassword:!0}};function O(){var e=Object(k.a)(["\n    color: #149dcc !important;\n    cursor: pointer;\n"]);return O=function(){return e},e}function S(){var e=Object(k.a)(["\n    width: 400px;\n    margin: auto;\n    background-color: #e9ecef;\n    padding: 40px;\n    border-radius: 15px;\n"]);return S=function(){return e},e}function C(){var e=Object(k.a)(["\n    padding-top: 30px;\n    padding-bottom: 20px;\n"]);return C=function(){return e},e}var j=w.a.div(C()),T=w.a.div(S()),D={display:"block",width:"100%",borderRadius:".25rem",backgroundColor:"#f5f5f5",boxShadow:"none",color:"#565656",lineHeight:1.43,padding:"1.07em 0.5em",height:"calc(2.25rem + 2px)",border:"1px solid #e8e8e8"},F={margin:0},x={textAlign:"center"},R={color:"red",fontStyle:"italic"},B=w.a.a(O()),N=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=E,n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.validateForm=n.validateForm.bind(Object(m.a)(n)),n.handleLogin=n.handleLogin.bind(Object(m.a)(n)),n.renderErrorMessage=n.renderErrorMessage.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(y.a)({},n,r),(function(){var e=t.validateForm(),a=e.errors,n=!e.valid;t.setState({disableSubmitButton:n,errors:a})}))}},{key:"validateForm",value:function(){var e=!0,t={};for(var a in t.firstName=this.state.firstName.length>0?"":"First Name is required",t.lastName=this.state.lastName.length>0?"":"Last Name is required",t.email=this.state.email.length>0?"":"Email is required",t.password=this.state.password.length>0?"":"Password is required",t.repassword=this.state.repassword.length>0?"":"Re-Password is required",""!==this.state.repassword&&this.state.password!==this.state.repassword&&(t.repassword="Password and Re-Password are not match"),t)if(t[a].length>0){e=!1;break}return{errors:t,valid:e}}},{key:"renderErrorMessage",value:function(e){var t=this.state.errors[e];if(t&&""!==t)return r.a.createElement("div",{style:R},r.a.createElement("div",{key:e},r.a.createElement("span",null,t)))}},{key:"handleLogin",value:function(){this.setState({redirectLoginPage:!0})}},{key:"render",value:function(){var e=this;return this.state.redirectLoginPage?r.a.createElement(g.a,{push:!0,to:this.props.LoginRedirectLink}):r.a.createElement(j,null,r.a.createElement(T,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.OnRegister(e.state)}},r.a.createElement("h3",{style:x},"Sign Up"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstName"},r.a.createElement("span",{style:R},"* "),r.a.createElement("span",{"data-text":"First name"},"First name")),r.a.createElement("input",{name:"firstName",type:"text",onChange:this.handleChange,style:D,placeholder:"First name"}),this.renderErrorMessage("firstName")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastName"},r.a.createElement("span",{style:R},"* "),r.a.createElement("span",{"data-text":"Last name"},"Last name")),r.a.createElement("input",{name:"lastName",type:"text",onChange:this.handleChange,style:D,placeholder:"Last name"}),this.renderErrorMessage("lastName")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("span",{style:R},"* "),r.a.createElement("span",{"data-text":"Email address"},"Email address")),r.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange,style:D,placeholder:"Enter email"}),this.renderErrorMessage("email")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",{style:R},"* "),r.a.createElement("span",{"data-text":"Password"},"Password")),r.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange,style:D,placeholder:"Enter password"}),this.renderErrorMessage("password")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"repassword"},r.a.createElement("span",{style:R},"* "),r.a.createElement("span",{"data-text":"Re-Password"},"Re-Password")),r.a.createElement("input",{name:"repassword",type:"password",onChange:this.handleChange,style:D,placeholder:"Re-Enter password"}),this.renderErrorMessage("repassword")),r.a.createElement("button",{style:F,disabled:this.state.disableSubmitButton,type:"submit",className:"btn btn-primary btn-block"},"Sign Up"),r.a.createElement("p",{className:"forgot-password text-right"},"Already registered ",r.a.createElement(B,{onClick:this.handleLogin},"Login?")))))}}]),a}(n.Component),L={email:"",password:"",rememberMe:!1,disableSubmitButton:!0,redirectRegisterPage:!1};function H(){var e=Object(k.a)(["\n    color: #149dcc !important;\n    cursor: pointer;\n"]);return H=function(){return e},e}function M(){var e=Object(k.a)(["\n            margin-top: 15px;\n        "]);return M=function(){return e},e}function A(){var e=Object(k.a)(["\n            width: 400px;\n            margin: auto;\n            background-color: #e9ecef;\n            padding: 40px;\n            border-radius: 15px;\n        "]);return A=function(){return e},e}function U(){var e=Object(k.a)(["\n            padding-top: 30px;\n            padding-bottom: 20px;\n        "]);return U=function(){return e},e}var q=w.a.div(U()),P=w.a.div(A()),Q=w.a.div(M()),_=w.a.a(H()),I=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state=L,n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleChangeByClick=n.handleChangeByClick.bind(Object(m.a)(n)),n.handleRegisterPage=n.handleRegisterPage.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleChange",value:function(e){var t=this;this.setState(Object(y.a)({},e.target.name,e.target.value),(function(){var e=""===t.state.email||""===t.state.password;t.setState({disableSubmitButton:e})}))}},{key:"handleChangeByClick",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.checked))}},{key:"handleRegisterPage",value:function(){this.setState({redirectRegisterPage:!0})}},{key:"render",value:function(){var e=this;return this.state.redirectRegisterPage?r.a.createElement(g.a,{push:!0,to:this.props.RegisterPageRedirectLink}):r.a.createElement(q,null,r.a.createElement(P,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.OnLogin(e.state)}},r.a.createElement("h3",{style:{textAlign:"center"}},"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Email address")),r.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange,className:"form-control",placeholder:"Enter email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Password")),r.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange,className:"form-control",placeholder:"Enter password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"custom-control custom-checkbox"},r.a.createElement("input",{name:"rememberMe",type:"checkbox",className:"custom-control-input",onClick:this.handleChangeByClick,id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},r.a.createElement("strong",null,"Remember me")))),r.a.createElement("input",{style:{margin:0},type:"submit",value:"Submit",className:"btn btn-primary btn-block",disabled:this.state.disableSubmitButton}),r.a.createElement(Q,null,r.a.createElement("p",{className:"float-left"},r.a.createElement(_,{className:"App-link",onClick:this.handleRegisterPage},"Sign Up"))))))}}]),a}(n.Component),J=a(113),K=a(114),V=a(167);var G,z=function e(t){Object(p.a)(this,e),this.key=void 0,this.value=void 0,this.key=t?t.key:null,this.value=t?t.value:null},W=function e(){Object(p.a)(this,e),this.apiServiceURL={login:"".concat("https://fullerton-healthcare-app.herokuapp.com","/api/login"),logout:"".concat("https://fullerton-healthcare-app.herokuapp.com","/api/logout"),register:"".concat("https://fullerton-healthcare-app.herokuapp.com","/api/register"),bookings:"".concat("https://fullerton-healthcare-app.herokuapp.com","/api/bookings"),eventTypes:"".concat("https://fullerton-healthcare-app.herokuapp.com","/api/eventtypes")},this.commonMessage={loginError:"Login error!!!",userNotFound:"User not found!!!",signUpSuccess:"Register success!!!",signUpError:"Register error!!!",deleteSuccess:"Delete success!!!",deleteError:"Delete error!!!",createSuccess:"Create success!!!",createError:"Create error!!!",updateSuccess:"Update success!!!",updateError:"Update error!!!"},this.roleDefinition={fullertonAdmin:1,companyHR:2},this.alertVariants={primary:"primary",secondar:"secondary",success:"success",danger:"danger",warning:"warning",info:"info",light:"light",dark:"dark"},this.datetimeFormat={yyyyMMdd:"yyyy/MM/dd",ddMMyyyy:"dd/mm/yyyy",yyyyMMddHHmm:"yyyy/MM/dd HH:mmm"},this.bookingStatus={pendingReview:new z({key:1,value:"Pending Review"}),approved:new z({key:2,value:"Approved"}),rejected:new z({key:3,value:"Rejected"})},this.bookingEventTypes={healthTalk:new z({key:1,value:"Dropdown with Health Talk"}),wellnessEvents:new z({key:2,value:"Wellness Events"}),fitnessActivities:new z({key:3,value:"Fitness Activities"})}},Y=a(19),$=function(){function e(){Object(p.a)(this,e),this.config=void 0,this.userLogin=this.userLogin.bind(this),this.userRegister=this.userRegister.bind(this),this.config=new W}return Object(h.a)(e,[{key:"userLogin",value:function(e){return Y.a.post(this.config.apiServiceURL.login,e).then((function(e){return Y.a.success(e)})).catch((function(e){throw e}))}},{key:"userLogout",value:function(){return Y.a.post(this.config.apiServiceURL.logout).then((function(e){return Y.a.success(e)})).catch((function(e){throw e}))}},{key:"userRegister",value:function(e){return Y.a.post(this.config.apiServiceURL.register,e).then((function(e){return Y.a.success(e)})).catch((function(e){throw e}))}}]),e}(),X=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).userService=void 0,n.userService=new $,n.logout=n.logout.bind(Object(m.a)(n)),n.renderBookingManagement=n.renderBookingManagement.bind(Object(m.a)(n)),n.renderProfileLink=n.renderProfileLink.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"logout",value:function(){var e=this;this.userService.userLogout().then((function(t){e.props.logoutUser()}))}},{key:"renderBookingManagement",value:function(){var e=[];return void 0!==this.props.user._id&&e.push(r.a.createElement(K.a.Link,{key:"bookings_nav_link",as:b.b,to:"/bookings"},"Bookings")),this.props.user.isAdmin&&e.push(r.a.createElement(K.a.Link,{key:"event_type_nav_link",as:b.b,to:"/eventtypes"},"Event Types")),e}},{key:"renderProfileLink",value:function(){return null!=this.props.user._id&&""!==this.props.user._id?r.a.createElement(V.a,{title:"".concat(this.props.user.firstName," ").concat(this.props.user.lastName),id:"basic-nav-dropdown"},r.a.createElement(V.a.Item,{as:b.b,to:"/login",onClick:this.logout},"Logout")):r.a.createElement(K.a.Link,{as:b.b,to:"/login"},"Login")}},{key:"render",value:function(){return r.a.createElement(J.a,{bg:"light",expand:"lg"},r.a.createElement(J.a.Brand,{as:b.b,to:"/bookings"},"Fullerton Healthcare"),r.a.createElement(J.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(J.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(K.a,{className:"mr-auto"},this.renderBookingManagement(),this.renderProfileLink())))}}]),a}(r.a.Component),Z={logoutUser:function(){return{type:"USER_LOGOUT",meta:{}}}},ee=Object(s.b)((function(e){return{user:e.user.currentUser}}),Z)(X),te=function e(t){Object(p.a)(this,e),this._id=void 0,this.email=void 0,this.password=void 0,this.firstName=void 0,this.lastName=void 0,this.role=void 0,this.token=void 0,this.isAdmin=void 0,this.isHr=void 0,this._id=t&&t._id?t._id:null,this.email=t&&t.email?t.email:"",this.password=t&&t.password?t.password:"",this.firstName=t&&t.firstName?t.firstName:"",this.lastName=t&&t.lastName?t.lastName:"",this.role=t&&t.role?t.role:"",this.token=t&&t.token?t.token:"",this.isAdmin=!1,this.isHr=!1},ae=function e(t){Object(p.a)(this,e),this._id=void 0,this.status=void 0,this.eventType=void 0,this.location=void 0,this.proposedDateTime1=void 0,this.proposedDateTime2=void 0,this.proposedDateTime3=void 0,this.choosenDateTime=void 0,this.reasonForRejection=void 0,this.createdBy=void 0,this.createdDate=void 0,this.updatedBy=void 0,this.updatedDate=void 0,this._id=t?t._id:null,this.status=t?t.status:null,this.eventType=t?t.eventType:null,this.location=t?t.location:null,this.proposedDateTime1=t?t.proposedDateTime1:null,this.proposedDateTime2=t?t.proposedDateTime2:null,this.proposedDateTime3=t?t.proposedDateTime3:null,this.choosenDateTime=t?t.choosenDateTime:null,this.reasonForRejection=t?t.reasonForRejection:null,this.createdBy=t?t.createdBy:new te,this.createdDate=t?t.createdDate:new Date,this.updatedBy=t?t.updatedBy:new te,this.updatedDate=t?t.updatedDate:new Date},ne=a(396),re=a(74),ie=a(35),oe=function(){function e(){Object(p.a)(this,e),this.configs=void 0,this.axiosConfig=void 0,this.formConfig=void 0,this.configs=new W,this.axiosConfig=re.a,this.formConfig=new ie.FormConfig,this.getAllData=this.getAllData.bind(this),this.getById=this.getById.bind(this),this.getByUser=this.getByUser.bind(this),this.createNew=this.createNew.bind(this),this.update=this.update.bind(this),this.deleteRecords=this.deleteRecords.bind(this),this.getQuestion=this.getQuestion.bind(this)}return Object(h.a)(e,[{key:"getAllData",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get(this.configs.apiServiceURL.bookings);case 3:return t=e.sent,e.abrupt("return",Y.a.success(t));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get("".concat(this.configs.apiServiceURL.bookings,"/").concat(t));case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getByUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get("".concat(this.configs.apiServiceURL.bookings,"/user/").concat(t));case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createNew",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("".concat(this.configs.apiServiceURL.bookings),t);case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.put("".concat(this.configs.apiServiceURL.bookings),t);case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRecords",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.axiosConfig.data=t,e.next=4,Y.a.delete("".concat(this.configs.apiServiceURL.bookings),this.axiosConfig);case 4:return a=e.sent,e.abrupt("return",Y.a.success(a));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getQuestion",value:function(e){var t=[],a={};return(a={})[this.formConfig.formValidators.require]={value:!0,errorMessage:"Location is required."},t.push(new ie.TextboxQuestion({key:"location",label:"Location",value:e.location,validators:a,type:this.formConfig.inputTypeDef.text,order:100})),t.push(new ie.ReferenceQuestion({key:"eventType",label:"Event Type",value:e.eventType,serverUrl:this.configs.apiServiceURL.eventTypes,displayField:"name",listFields:["name"],searchBar:!0,order:200})),t.push(new ie.DateTimeQuestion({key:"proposedDateTime1",label:"Proposed Date Time 1",value:e.proposedDateTime1?new Date(e.proposedDateTime1):void 0,order:400})),t.push(new ie.DateTimeQuestion({key:"proposedDateTime2",label:"Proposed Date Time 2",value:e.proposedDateTime2?new Date(e.proposedDateTime2):void 0,order:500})),t.push(new ie.DateTimeQuestion({key:"proposedDateTime3",label:"Proposed Date Time 3",value:e.proposedDateTime3?new Date(e.proposedDateTime3):void 0,order:600})),t.sort((function(e,t){return e.order-t.order}))}},{key:"convertFormToObject",value:function(e,t){var a=new ae(e.listFields);return a._id=t._id,a.status=t.status,a.choosenDateTime=t.choosenDateTime,a.reasonForRejection=t.reasonForRejection,a.createdBy=t.createdBy,a.createdDate=t.createdDate,a.updatedBy=t.updatedBy,a.updatedDate=t.updatedDate,a}}]),e}(),se=a(112);!function(e){e.OK="OK",e.CANCEL="CANCEL"}(G||(G={}));var ce=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={show:!1},n.handleClose=n.handleClose.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.setState({show:this.props.show})}},{key:"handleClose",value:function(){var e=this;this.setState({show:!1},(function(){e.props.onActionFire(G.CANCEL,ie.initialDynamicFormStates)}))}},{key:"handleSubmit",value:function(e){var t=this;this.setState({show:!1},(function(){t.props.onActionFire(G.OK,e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(se.a,{show:this.state.show,onHide:this.handleClose,backdrop:"static",keyboard:!1},r.a.createElement(se.a.Header,{closeButton:!0},r.a.createElement(se.a.Title,null,this.props.modalTitle)),r.a.createElement(se.a.Body,null,r.a.createElement(ie.DynamicForm,{ListFields:this.props.questions,OnSubmitCallback:this.handleSubmit}))))}}]),a}(r.a.Component),le=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,[{key:"convertDateToStringByFormat",value:function(e,t){var a=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return t.replace("yyyy",a.toString()).replace("MM",this.fixedFormatTwoDigit(n)).replace("dd",this.fixedFormatTwoDigit(r)).replace("HH",this.fixedFormatTwoDigit(i)).replace("mmm",this.fixedFormatTwoDigit(o)).replace("SS",this.fixedFormatTwoDigit(s))}},{key:"fixedFormatTwoDigit",value:function(e){return e<10?"0"+e.toString():e.toString()}}]),e}();function ue(e){return{type:"UPDATE_REQUEST",payload:e}}function de(e){return{type:"UPDATE_ALERT",payload:e}}function pe(){var e=Object(k.a)(["\n    width: 100%;\n    display: inline-block;\n"]);return pe=function(){return e},e}function he(){var e=Object(k.a)(["\n    width: 80%;\n    margin: auto;\n    padding-top: 50px;\n    padding-bottom: 100px;\n    font-size: small;\n    font-weight: 400;\n"]);return he=function(){return e},e}var me=w.a.div(he()),fe=w.a.div(pe()),ve={booking:new ae,modalConfig:{},redirectToBookingList:!1},ge=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).config=void 0,n.bookingService=void 0,n.commonService=void 0,n.formConfig=void 0,n.state=ve,n.formConfig=new ie.FormConfig,n.config=new W,n.bookingService=new oe,n.commonService=new le,n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleApprove=n.handleApprove.bind(Object(m.a)(n)),n.handleReject=n.handleReject.bind(Object(m.a)(n)),n.handleCancel=n.handleCancel.bind(Object(m.a)(n)),n.renderUiAction=n.renderUiAction.bind(Object(m.a)(n)),n.redirectToBookingList=n.redirectToBookingList.bind(Object(m.a)(n)),n.handleBookingModalAction=n.handleBookingModalAction.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.bookingId;this.bookingService.getById(t).then((function(t){e.setState({booking:t})}))}},{key:"handleSubmit",value:function(e){var t=this.bookingService.convertFormToObject(e,this.state.booking);this.bookingService.update(t).then((function(e){window.location.reload()}))}},{key:"handleApprove",value:function(){var e=[],t={};(t={})[this.formConfig.formValidators.require]={value:!0,errorMessage:"Approve date is required."};var a=[];if(this.state.booking.proposedDateTime1){var n=new Date(this.state.booking.proposedDateTime1);a.push(new z({key:0,value:this.commonService.convertDateToStringByFormat(n,this.config.datetimeFormat.yyyyMMddHHmm)}))}if(this.state.booking.proposedDateTime2){var r=new Date(this.state.booking.proposedDateTime2);a.push(new z({key:1,value:this.commonService.convertDateToStringByFormat(r,this.config.datetimeFormat.yyyyMMddHHmm)}))}if(this.state.booking.proposedDateTime3){var i=new Date(this.state.booking.proposedDateTime3);a.push(new z({key:2,value:this.commonService.convertDateToStringByFormat(i,this.config.datetimeFormat.yyyyMMddHHmm)}))}e.push(new ie.RadioButtonQuestion({key:"choosenDateTime",label:"Approve date",value:"",options:a,validators:t,order:100})),this.setState({modalConfig:{show:!0,modalTitle:"Approve confirmation",action:"approve",questions:e}})}},{key:"handleReject",value:function(){var e=[],t={};(t={})[this.formConfig.formValidators.require]={value:!0,errorMessage:"Rejection reason is required."},e.push(new ie.TextAreaQuestion({key:"reasonForRejection",label:"Rejection reason",value:"",validators:t,rows:5,order:100})),this.setState({modalConfig:{show:!0,modalTitle:"Reject confirmation",action:"reject",questions:e}})}},{key:"handleBookingModalAction",value:function(e,t){if(this.setState({modalConfig:{}}),e===G.OK){var a=this.state.booking;switch(this.state.modalConfig.action){case"reject":a.status=this.config.bookingStatus.rejected,a.reasonForRejection=t.listFields.reasonForRejection;break;case"approve":a.status=this.config.bookingStatus.approved;var n=[this.state.booking.proposedDateTime1,this.state.booking.proposedDateTime2,this.state.booking.proposedDateTime3];a.choosenDateTime=n[t.listFields.choosenDateTime.key]}this.bookingService.update(a).then((function(e){window.location.reload()}))}}},{key:"handleCancel",value:function(){var e=this;window.confirm("Do you want to delete this record?")&&this.bookingService.deleteRecords([this.state.booking]).then((function(t){e.props.updateAlert({show:!0,value:e.config.commonMessage.deleteSuccess,variant:e.config.alertVariants.success}),e.setState({redirectToBookingList:!0})}))}},{key:"renderUiAction",value:function(){var e;return this.state.booking.status&&this.state.booking.status.key===this.config.bookingStatus.pendingReview.key&&(this.props.user.isHr?e=r.a.createElement(fe,null,r.a.createElement(ne.a,{className:"float-right",onClick:this.handleCancel,variant:"contained",color:"primary"},"Cancel")):this.props.user.isAdmin&&(e=r.a.createElement(fe,null,r.a.createElement(ne.a,{className:"float-right",onClick:this.handleApprove,variant:"contained",color:"primary"},"Approve"),r.a.createElement(ne.a,{className:"float-right",onClick:this.handleReject,style:{marginRight:10},variant:"contained",color:"primary"},"Reject")))),e}},{key:"redirectToBookingList",value:function(){if(this.state.redirectToBookingList)return r.a.createElement(g.a,{push:!1,to:{pathname:"/bookings",state:{isNeedReload:"true"}}})}},{key:"render",value:function(){var e=this.bookingService.getQuestion(this.state.booking);return r.a.createElement(me,null,this.redirectToBookingList(),this.renderUiAction(),r.a.createElement(ie.DynamicForm,{ListFields:e,OnSubmitCallback:this.handleSubmit}),this.state.modalConfig.show?r.a.createElement(ce,{show:this.state.modalConfig.show,modalTitle:this.state.modalConfig.modalTitle,questions:this.state.modalConfig.questions,onActionFire:this.handleBookingModalAction}):"")}}]),a}(r.a.Component),be={updateAlert:de},ye=Object(g.g)(Object(s.b)((function(e){return{user:e.user.currentUser}}),be)(ge)),ke=a(89),we=(a(169),a(225)),Ee=a(215);function Oe(e){var t=e.column,a=t.filterValue,n=t.preFilteredRows,i=t.setFilter,o=n.length;return r.a.createElement("input",{value:a||"",onClick:function(e){return e.stopPropagation()},onChange:function(e){i(e.target.value||void 0)},placeholder:"Search ".concat(o," records...")})}function Se(e){var t=e.column,a=t.filterValue,n=t.setFilter,i=t.preFilteredRows,o=t.id,s=r.a.useMemo((function(){var e=new Set;return i.forEach((function(t){""!==t.values[o]&&e.add(t.values[o])})),Object(we.a)(e.values())}),[o,i]);return r.a.createElement("select",{value:a,onClick:function(e){return e.stopPropagation()},onChange:function(e){n(e.target.value||void 0)}},r.a.createElement("option",{value:""},"All"),s.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))}function Ce(e,t,a){return Object(Ee.a)(e,a,{keys:[function(e){return e.values[t]}]})}Ce.autoRemove=function(e){return!e};var je=a(226),Te=a(411),De=r.a.forwardRef((function(e,t){var a=e.indeterminate,n=Object(je.a)(e,["indeterminate"]),i=r.a.useRef(),o=t||i;return r.a.useEffect((function(){o.current.indeterminate=a}),[o,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,Object.assign({type:"checkbox",ref:o},n)))})),Fe=a(401),xe=a(403),Re=a(404),Be=a(405),Ne=a(418),Le=a(406),He=a(407),Me=a(412),Ae=a(402),Ue=a(164),qe=a.n(Ue),Pe=a(353),Qe=a(166),_e=a.n(Qe),Ie=a(165),Je=a.n(Ie),Ke=a(163),Ve=a.n(Ke),Ge=a(397),ze=a(59),We=Object(Ge.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}})),Ye=function(e){var t=We(),a=Object(ze.a)(),n=e.count,i=e.page,o=e.rowsPerPage,s=e.onChangePage;return r.a.createElement("div",{className:t.root},r.a.createElement(Pe.a,{onClick:function(e){s(e,0)},disabled:0===i,"aria-label":"first page"},"rtl"===a.direction?r.a.createElement(Ve.a,null):r.a.createElement(qe.a,null)),r.a.createElement(Pe.a,{onClick:function(e){s(e,i-1)},disabled:0===i,"aria-label":"previous page"},"rtl"===a.direction?r.a.createElement(Je.a,null):r.a.createElement(_e.a,null)),r.a.createElement(Pe.a,{onClick:function(e){s(e,i+1)},disabled:i>=Math.ceil(n/o)-1,"aria-label":"next page"},"rtl"===a.direction?r.a.createElement(_e.a,null):r.a.createElement(Je.a,null)),r.a.createElement(Pe.a,{onClick:function(e){s(e,Math.max(0,Math.ceil(n/o)-1))},disabled:i>=Math.ceil(n/o)-1,"aria-label":"last page"},"rtl"===a.direction?r.a.createElement(qe.a,null):r.a.createElement(Ve.a,null)))},$e=a(5),Xe=a(398),Ze=a(399),et=a(115),tt=a(394),at=a(415),nt=a(408),rt=a(392),it=a(417),ot=a(400),st=a(219),ct=a.n(st),lt=a(218),ut=a.n(lt),dt=a(17),pt=a(229),ht=a(217),mt=a.n(ht),ft=Object(Ge.a)((function(e){return{search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(dt.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(dt.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200})}})),vt=function(e){var t=e.preGlobalFilteredRows,a=e.globalFilter,n=void 0===a?"":a,i=e.setGlobalFilter,o=ft(),s=t.length;return r.a.createElement("div",{className:o.search},r.a.createElement("div",{className:o.searchIcon},r.a.createElement(mt.a,null)),r.a.createElement(pt.a,{value:n||"",onChange:function(e){i(e.target.value||void 0)},placeholder:"".concat(s," records..."),classes:{root:o.inputRoot,input:o.inputInput},inputProps:{"aria-label":"search"}}))},gt=Object(Ge.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(dt.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),bt={PaperProps:{style:{maxHeight:224,width:250}}},yt=function(e){var t=gt(),a=e.numSelected,n=e.deleteRecordHandler,i=e.addRecordHandler,o=e.preGlobalFilteredRows,s=e.setGlobalFilter,c=e.globalFilter,l=void 0===c?"":c,u=e.TableName,d=void 0===u?"":u,p=e.allColumns,h=e.showAddRecord;return r.a.createElement(Xe.a,{className:Object($e.a)(t.root,Object(y.a)({},t.highlight,a>0))},h?r.a.createElement(Ze.a,{title:"Add"},r.a.createElement(Pe.a,{"aria-label":"add",onClick:i},r.a.createElement(ut.a,null))):r.a.createElement("div",null),a>0?r.a.createElement(et.a,{className:t.title,color:"inherit",variant:"subtitle1"},a," selected"):r.a.createElement(et.a,{className:t.title,variant:"h6",id:"tableTitle"},d),a>0?r.a.createElement(Ze.a,{title:"Delete"},r.a.createElement(Pe.a,{"aria-label":"delete",onClick:n},r.a.createElement(ct.a,null))):r.a.createElement(vt,{preGlobalFilteredRows:o,globalFilter:l,setGlobalFilter:s}),r.a.createElement(tt.a,{className:t.formControl},r.a.createElement(at.a,{id:"columns-visible-label"},"Columns"),r.a.createElement(nt.a,{labelId:"columns-visible-label",id:"columns-visible-select",multiple:!0,value:["Select columns"],input:r.a.createElement(rt.a,null),renderValue:function(e){return e.join(", ")},MenuProps:bt},p.map((function(e){return r.a.createElement(it.a,{key:e.id,value:e.id},r.a.createElement(Te.a,e.getToggleHiddenProps()),r.a.createElement(ot.a,{primary:e.id}))})))))};a(338);function kt(e){var t=e.columns,a=e.data,n=e.fetchData,i=e.pageCount,o=e.skipPageReset,s=void 0===o||o,c=e.deleteRecordHandler,l=void 0===c?function(e){}:c,u=e.addRecordHandler,d=void 0===u?function(){}:u,p=e.TableName,h=void 0===p?"":p,m=e.showSelection,f=void 0===m||m,v=e.showAddRecord,g=void 0===v||v,b=r.a.useMemo((function(){return{fuzzyText:Ce,text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),y=r.a.useMemo((function(){return{Filter:Oe}}),[]),k=Object(ke.useTable)({columns:t,data:a,defaultColumn:y,filterTypes:b,autoResetPage:!s,pageCount:i,initialState:{hiddenColumns:["createdBy","createdDate","updatedBy","updatedDate"]}},ke.useGlobalFilter,ke.useFilters,ke.useSortBy,ke.usePagination,ke.useRowSelect,(function(e){e.allColumns.push((function(e){return f&&e.unshift({id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(De,t()))},Cell:function(e){var t=e.row;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(De,t.getToggleRowSelectedProps()))}}),e}))})),w=k.getTableProps,E=k.getTableBodyProps,O=k.headerGroups,S=k.prepareRow,C=k.page,j=k.gotoPage,T=k.setPageSize,D=k.allColumns,F=k.preGlobalFilteredRows,x=k.setGlobalFilter,R=k.state,B=R.pageIndex,N=R.pageSize,L=R.selectedRowIds,H=R.globalFilter;r.a.useEffect((function(){n({pageIndex:B,pageSize:N})}),[n,B,N]);return r.a.createElement(Fe.a,{className:"ReactTable"},r.a.createElement(yt,{showAddRecord:g,numSelected:Object.keys(L).length,deleteRecordHandler:function(){var e=Object.keys(L).map((function(e){return parseInt(e,10)})),t=a.filter((function(t,a){return e.includes(a)}));l(t)},addRecordHandler:d,TableName:h,preGlobalFilteredRows:F,setGlobalFilter:x,globalFilter:H,allColumns:D}),r.a.createElement(Ae.a,Object.assign({},w(),{className:"react-custom-table"}),r.a.createElement(xe.a,null,O.map((function(e){return r.a.createElement(Re.a,e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement(Be.a,"selection"===e.id?e.getHeaderProps():e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),"selection"!==e.id?r.a.createElement(Ne.a,{active:e.isSorted,direction:e.isSortedDesc?"desc":"asc"}):null,r.a.createElement("div",{className:"table-header-filter"},e.canFilter&&!e.columnDisableGlobalFilter?e.render("Filter"):null))})))}))),r.a.createElement(Le.a,E(),C.map((function(e,t){return S(e),r.a.createElement(Re.a,e.getRowProps(),e.cells.map((function(e){return r.a.createElement(Be.a,e.getCellProps(),e.render("Cell"))})))}))),r.a.createElement(He.a,{className:"pagination"},r.a.createElement(Re.a,null,r.a.createElement(Me.a,{colSpan:1e4,count:i,rowsPerPage:N,page:B,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){j(t)},onChangeRowsPerPage:function(e){T(Number(e.target.value))},ActionsComponent:Ye})))))}function wt(){var e=Object(k.a)(["\n    min-height: calc(100vh - 80px);\n"]);return wt=function(){return e},e}var Et=w.a.div(wt()),Ot=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).bookingService=void 0,n.commonService=void 0,n.config=void 0,n.state={allBooking:[],bookingList:[],isLoading:!1,modalConfig:{}},n.bookingService=new oe,n.commonService=new le,n.config=new W,n.deleteBookingHandler=n.deleteBookingHandler.bind(Object(m.a)(n)),n.addBookingHandler=n.addBookingHandler.bind(Object(m.a)(n)),n.handleCreateBookingAction=n.handleCreateBookingAction.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.allBooking,!this.props.user.currentUser.isHr){e.next=7;break}return e.next=4,this.bookingService.getByUser(this.props.user.currentUser._id);case 4:t=e.sent,e.next=11;break;case 7:if(!this.props.user.currentUser.isAdmin){e.next=11;break}return e.next=10,this.bookingService.getAllData();case 10:t=e.sent;case 11:this.setState({allBooking:t,isLoading:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.props.location.state&&"true"===this.props.location.state.isNeedReload&&window.location.reload()}},{key:"deleteBookingHandler",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.filter((function(e){return e.status.key!==a.config.bookingStatus.pendingReview.key})).length>0)){e.next=5;break}alert("Could not delete [un-pending] booking"),e.next=9;break;case 5:if(!window.confirm("Do you want to delete the selected record(s)?")){e.next=9;break}return e.next=8,this.bookingService.deleteRecords(t);case 8:window.location.reload();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateBookingAction",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({modalConfig:{}}),t!==G.OK){e.next=7;break}return(n=this.bookingService.convertFormToObject(a,new ae)).status=this.config.bookingStatus.pendingReview,e.next=6,this.bookingService.createNew(n);case 6:window.location.reload();case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addBookingHandler",value:function(){var e=this.bookingService.getQuestion(new ae);this.setState({modalConfig:{show:!0,modalTitle:"Create new booking",questions:e}})}},{key:"render",value:function(){var e=this,t=[{Header:"Location",id:"location",accessor:"location",Cell:function(e){var t=e.row;return r.a.createElement(b.b,{to:"bookings/".concat(t.original._id)},t.original.location)}},{Header:"Event Type",id:"eventType",Filter:Se,filter:"includes",accessor:function(e){var t="";return e.eventType&&(t=e.eventType.name),t}},{Header:"Status",id:"status",Filter:Se,filter:"includes",accessor:function(e){var t="";return e.status&&(t=e.status.value),t}},{Header:"Proposed 1",id:"proposedDateTime1",accessor:function(t){var a="";if(t.proposedDateTime1){var n=new Date(t.proposedDateTime1);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Proposed 2",id:"proposedDateTime2",accessor:function(t){var a="";if(t.proposedDateTime2){var n=new Date(t.proposedDateTime2);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Proposed 3",id:"proposedDateTime3",accessor:function(t){var a="";if(t.proposedDateTime3){var n=new Date(t.proposedDateTime3);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Approved Date",id:"choosenDateTime",accessor:function(t){var a="";if(t.choosenDateTime){var n=new Date(t.choosenDateTime);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Reject reason",id:"reasonForRejection",accessor:"reasonForRejection"},{Header:"Created By",id:"createdBy",accessor:function(e){return e.createdBy?"".concat(e.createdBy.firstName," ").concat(e.createdBy.lastName):""}},{Header:"Created",id:"createdDate",accessor:function(t){var a="";if(t.createdDate){var n=new Date(t.createdDate);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Updated By",id:"updatedBy",accessor:function(e){return e.updatedBy?"".concat(e.updatedBy.firstName," ").concat(e.updatedBy.lastName):""}},{Header:"Updated",id:"updatedDate",accessor:function(t){var a="";if(t.updatedDate){var n=new Date(t.updatedDate);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}}];return r.a.createElement("div",null,this.state.modalConfig.show?r.a.createElement(ce,{show:this.state.modalConfig.show,modalTitle:this.state.modalConfig.modalTitle,onActionFire:this.handleCreateBookingAction,questions:this.state.modalConfig.questions}):"",r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/bookings"},r.a.createElement(Et,null,r.a.createElement(kt,{columns:t,data:this.state.allBooking,pageCount:this.state.allBooking.length,fetchData:function(){},deleteRecordHandler:this.deleteBookingHandler,showSelection:this.props.user.currentUser.isHr,showAddRecord:this.props.user.currentUser.isHr,addRecordHandler:this.addBookingHandler,TableName:"Bookings"}))),r.a.createElement(g.b,{path:"/bookings/:bookingId"},r.a.createElement(ye,null))))}}]),a}(n.Component),St=Object(g.g)(Object(s.b)((function(e){return{user:e.user}}),{})(Ot)),Ct=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return n.createElement(g.b,{render:function(t){return e.props.user._id?e.props.adminOnly&&!e.props.user.isAdmin?n.createElement(g.a,{to:"/page401"}):e.props.component?n.createElement(e.props.component):e.props.render?e.props.render(t):void 0:n.createElement(g.a,{to:"/login"})}})}}]),a}(g.b),jt=Object(s.b)((function(e){return{user:e.user.currentUser}}),{})(Ct),Tt=function e(t){Object(p.a)(this,e),this._id=void 0,this.name=void 0,this.createdBy=void 0,this.createdDate=void 0,this.updatedBy=void 0,this.updatedDate=void 0,this._id=t?t._id:null,this.name=t?t.name:null,this.createdBy=t?t.createdBy:new te,this.createdDate=t?t.createdDate:new Date,this.updatedBy=t?t.updatedBy:new te,this.updatedDate=t?t.updatedDate:new Date},Dt=function(){function e(){Object(p.a)(this,e),this.configs=void 0,this.axiosConfig=void 0,this.formConfig=void 0,this.configs=new W,this.axiosConfig=re.a,this.formConfig=new ie.FormConfig,this.getAllData=this.getAllData.bind(this),this.getById=this.getById.bind(this),this.createNew=this.createNew.bind(this),this.update=this.update.bind(this),this.deleteRecords=this.deleteRecords.bind(this),this.getQuestion=this.getQuestion.bind(this)}return Object(h.a)(e,[{key:"getAllData",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get(this.configs.apiServiceURL.eventTypes);case 3:return t=e.sent,e.abrupt("return",Y.a.success(t));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get("".concat(this.configs.apiServiceURL.eventTypes,"/").concat(t));case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getByUser",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.get("".concat(this.configs.apiServiceURL.eventTypes,"/user/").concat(t));case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createNew",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.post("".concat(this.configs.apiServiceURL.eventTypes),t);case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.a.put("".concat(this.configs.apiServiceURL.eventTypes),t);case 3:return a=e.sent,e.abrupt("return",Y.a.success(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteRecords",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.axiosConfig.data=t,e.next=4,Y.a.delete("".concat(this.configs.apiServiceURL.eventTypes),this.axiosConfig);case 4:return a=e.sent,e.abrupt("return",Y.a.success(a));case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getQuestion",value:function(e){var t=[],a={};return(a={})[this.formConfig.formValidators.require]={value:!0,errorMessage:"Name is required."},t.push(new ie.TextboxQuestion({key:"name",label:"Name",value:e.name,validators:a,type:this.formConfig.inputTypeDef.text,order:100})),t.sort((function(e,t){return e.order-t.order}))}},{key:"convertFormToObject",value:function(e,t){var a=new Tt(e.listFields);return a._id=t._id,a.createdBy=t.createdBy,a.createdDate=t.createdDate,a.updatedBy=t.updatedBy,a.updatedDate=t.updatedDate,a}}]),e}();function Ft(){var e=Object(k.a)(["\n    width: 40%;\n    margin: auto;\n    padding-top: 50px;\n    padding-bottom: 100px;\n    font-size: small;\n    font-weight: 400;\n"]);return Ft=function(){return e},e}var xt=w.a.div(Ft()),Rt={eventType:new Tt},Bt=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).eventTypeService=void 0,n.config=void 0,n.state=Rt,n.eventTypeService=new Dt,n.config=new W,n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.typeId;this.eventTypeService.getById(t).then((function(t){e.setState({eventType:t})}))}},{key:"handleSubmit",value:function(e){var t=this,a=this.eventTypeService.convertFormToObject(e,this.state.eventType);this.eventTypeService.update(a).then((function(e){window.location.reload()})).catch((function(e){var a=e.response&&e.response.data?e.response.data:t.config.commonMessage.updateError;t.props.updateAlert({show:!0,value:a,variant:t.config.alertVariants.danger})}))}},{key:"render",value:function(){var e=this.eventTypeService.getQuestion(this.state.eventType);return r.a.createElement(xt,null,r.a.createElement(ie.DynamicForm,{ListFields:e,OnSubmitCallback:this.handleSubmit}))}}]),a}(r.a.Component),Nt={updateAlert:de},Lt=Object(g.g)(Object(s.b)((function(e){return{}}),Nt)(Bt));function Ht(){var e=Object(k.a)(["\n    min-height: calc(100vh - 80px);\n"]);return Ht=function(){return e},e}var Mt=w.a.div(Ht()),At=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).eventTypeService=void 0,n.commonService=void 0,n.config=void 0,n.state={allEventTypes:[],modalConfig:{}},n.eventTypeService=new Dt,n.commonService=new le,n.config=new W,n.deleteEventTypeHandler=n.deleteEventTypeHandler.bind(Object(m.a)(n)),n.addEventTypeHandler=n.addEventTypeHandler.bind(Object(m.a)(n)),n.handleCreateEventTypeAction=n.handleCreateEventTypeAction.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.eventTypeService.getAllData();case 2:t=e.sent,this.setState({allEventTypes:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteEventTypeHandler",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=["Dropdown with Health Talk","Wellness Events","Fitness Activities"],!(t.filter((function(e){return-1!==a.indexOf(e.name)})).length>0)){e.next=6;break}alert("Could not delete the selected record(s)"),e.next=10;break;case 6:if(!window.confirm("Do you want to delete the selected record(s)?")){e.next=10;break}return e.next=9,this.eventTypeService.deleteRecords(t);case 9:window.location.reload();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCreateEventTypeAction",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({modalConfig:{}}),t===G.OK&&(n=this.eventTypeService.convertFormToObject(a,new Tt),this.eventTypeService.createNew(n).then((function(e){window.location.reload()})).catch((function(e){var t=e.response&&e.response.data?e.response.data:r.config.commonMessage.createError;r.props.updateAlert({show:!0,value:t,variant:r.config.alertVariants.danger})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addEventTypeHandler",value:function(){var e=this.eventTypeService.getQuestion(new Tt);this.setState({modalConfig:{show:!0,modalTitle:"Create new event type",questions:e}})}},{key:"render",value:function(){var e=this,t=[{Header:"Name",id:"name",accessor:"name",Cell:function(e){var t=e.row;return r.a.createElement(b.b,{to:"eventtypes/".concat(t.original._id)},t.original.name)}},{Header:"Created By",id:"createdBy",accessor:function(e){return e.createdBy?"".concat(e.createdBy.firstName," ").concat(e.createdBy.lastName):""}},{Header:"Created",id:"createdDate",accessor:function(t){var a="";if(t.createdDate){var n=new Date(t.createdDate);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}},{Header:"Updated By",id:"updatedBy",accessor:function(e){return e.updatedBy?"".concat(e.updatedBy.firstName," ").concat(e.updatedBy.lastName):""}},{Header:"Updated",id:"updatedDate",accessor:function(t){var a="";if(t.updatedDate){var n=new Date(t.updatedDate);a=e.commonService.convertDateToStringByFormat(n,e.config.datetimeFormat.yyyyMMddHHmm)}return a}}];return r.a.createElement("div",null,this.state.modalConfig.show?r.a.createElement(ce,{show:this.state.modalConfig.show,modalTitle:this.state.modalConfig.modalTitle,onActionFire:this.handleCreateEventTypeAction,questions:this.state.modalConfig.questions}):"",r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/eventtypes"},r.a.createElement(Mt,null,r.a.createElement(kt,{columns:t,data:this.state.allEventTypes,pageCount:this.state.allEventTypes.length,fetchData:function(){},deleteRecordHandler:this.deleteEventTypeHandler,addRecordHandler:this.addEventTypeHandler,TableName:"Event Types"}))),r.a.createElement(g.b,{path:"/eventtypes/:typeId"},r.a.createElement(Lt,null))))}}]),a}(n.Component),Ut={updateAlert:de},qt=Object(g.g)(Object(s.b)((function(e){return{user:e.user}}),Ut)(At)),Pt=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 80px)",color:"red"}},r.a.createElement("h2",null,"401 Access denied"))}}]),a}(r.a.Component),Qt=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).userService=void 0,n.config=void 0,n.state={redirectLogin:!1,redirectHome:!1},n.userService=new $,n.config=new W,n.handleOnSubmitLoginForm=n.handleOnSubmitLoginForm.bind(Object(m.a)(n)),n.handleOnSubmitRegisterForm=n.handleOnSubmitRegisterForm.bind(Object(m.a)(n)),n.handleRenderRedirectRouter=n.handleRenderRedirectRouter.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(){this.state.redirectHome?this.setState({redirectHome:!1}):this.state.redirectLogin&&this.setState({redirectLogin:!1})}},{key:"handleOnSubmitLoginForm",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={username:t.email,password:t.password,rememberMe:t.rememberMe},this.userService.userLogin(a).then((function(e){if(e&&e.email===t.email){var a=new te(e);a.isAdmin=a.role===n.config.roleDefinition.fullertonAdmin,a.isHr=a.role===n.config.roleDefinition.companyHR,n.props.loginUser(a),n.setState({redirectHome:!0})}else n.props.updateAlert({show:!0,value:n.config.commonMessage.userNotFound,variant:n.config.alertVariants.danger})})).catch((function(e){n.props.updateAlert({show:!0,value:n.config.commonMessage.loginError,variant:n.config.alertVariants.danger})}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOnSubmitRegisterForm",value:function(e){var t=this,a=new te({firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password,role:this.config.roleDefinition.companyHR});this.userService.userRegister(a).then((function(e){t.props.updateAlert({show:!0,value:t.config.commonMessage.signUpSuccess,variant:t.config.alertVariants.success}),t.setState({redirectLogin:!0})})).catch((function(e){var a=e.response&&e.response.data?e.response.data:t.config.commonMessage.signUpError;t.props.updateAlert({show:!0,value:a,variant:t.config.alertVariants.danger})}))}},{key:"handleRenderRedirectRouter",value:function(){return this.state.redirectLogin?r.a.createElement(g.a,{push:!0,to:"/login"}):this.state.redirectHome?r.a.createElement(g.a,{push:!0,to:"/bookings"}):void 0}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(ee,null),this.handleRenderRedirectRouter(),r.a.createElement("div",{className:"container"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/login"},r.a.createElement(I,{OnLogin:this.handleOnSubmitLoginForm,RegisterPageRedirectLink:"/signup"})),r.a.createElement(jt,{path:"/bookings",component:St}),r.a.createElement(jt,{path:"/eventtypes",adminOnly:!0,component:qt}),r.a.createElement(g.b,{exact:!0,path:"/page401"},r.a.createElement(Pt,null)),r.a.createElement(g.b,{exact:!0,path:"/signup"},r.a.createElement(N,{OnRegister:this.handleOnSubmitRegisterForm,LoginRedirectLink:"/login"})))))}}]),a}(r.a.Component),_t={updateAlert:de,loginUser:function(e){return{type:"USER_LOGIN",payload:e}}},It=Object(s.b)((function(e){return{user:e.user}}),_t)(Qt),Jt=a(52),Kt=a(220),Vt=a(168),Gt=a(221),zt=a.n(Gt),Wt=a(222),Yt=a.n(Wt),$t=a(68),Xt={currentUser:{},userList:[]};var Zt={numberOfRequest:0,alertConfig:{}};var ea={key:"root",storage:zt.a},ta=Object(Jt.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object($t.a)(Object($t.a)({},e),{},{currentUser:t.payload});case"USER_LOGOUT":return Object($t.a)(Object($t.a)({},e),{},{currentUser:{}});default:return e}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_REQUEST":return Object($t.a)(Object($t.a)({},e),{},{numberOfRequest:t.payload});case"UPDATE_ALERT":return Object($t.a)(Object($t.a)({},e),{},{alertConfig:t.payload});default:return e}}}),aa=Object(Vt.a)(ea,ta),na=0,ra={interceptors:{request:[{success:function(e,t){var a=e.getState,n=e.dispatch,r=(e.getSourceAction,a());return t.headers.Authorization="bearer ".concat(r.user.currentUser.token),n(ue(++na)),t},error:function(e,t){e.getState,e.dispatch,e.getSourceAction;throw t}}],response:[{success:function(e,t){e.getState;var a=e.dispatch;e.getSourceAction;return a(ue(--na)),t},error:function(e,t){e.getState;var a=e.dispatch;e.getSourceAction;throw a(ue(--na)),t}}]}},ia=Object(Jt.applyMiddleware)(Yt()(Y.a.api,ra)),oa=function(){var e=Object(Jt.createStore)(aa,Object(Kt.composeWithDevTools)(ia));return{store:e,persistor:Object(Vt.b)(e)}},sa=a(155),ca=a(223),la=a.n(ca);function ua(){var e=Object(k.a)(["\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    z-index: 10000;\n    opacity: 0.5;\n    background-color: gray;\n    top: 0px;\n"]);return ua=function(){return e},e}function da(){var e=Object(k.a)(["\n    display: block;\n    margin: 0 auto;\n    margin-top: 200px;\n    border-color: red;\n"]);return da=function(){return e},e}var pa=Object(sa.css)(da()),ha=w.a.div(ua()),ma=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.numberOfRequest>0?r.a.createElement(ha,{className:"sweet-loading"},r.a.createElement(la.a,{css:pa,size:100,loading:this.props.numberOfRequest>0})):"")}}]),a}(r.a.Component),fa=Object(s.b)((function(e){return{numberOfRequest:e.request.numberOfRequest}}),{})(ma),va=a(224);function ga(){var e=Object(k.a)(["\n    float: right;\n    margin-top: -18px;\n    cursor: pointer;\n    margin-right: -10px;\n"]);return ga=function(){return e},e}function ba(){var e=Object(k.a)(["\n    position: fixed;\n    top: -20px;\n    width: 100%;\n    z-index: 1000000;\n    padding: 30px;\n"]);return ba=function(){return e},e}var ya=w.a.div(ba()),ka=w.a.div(ga()),wa={borderRadius:".25rem"},Ea=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;this.props.show&&setTimeout((function(){e.props.updateAlert({})}),2e3)}},{key:"handleOnCloseButton",value:function(){this.props.updateAlert({})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.show?r.a.createElement(ya,null,r.a.createElement(va.a,{style:wa,key:"GlobalAlert",variant:this.props.variant},r.a.createElement(ka,{onClick:function(){return e.handleOnCloseButton()}},r.a.createElement("strong",null,"x")),this.props.value)):"")}}]),a}(r.a.Component),Oa={updateAlert:de},Sa=Object(s.b)((function(e){if(e.request.alertConfig)return{show:e.request.alertConfig.show,variant:e.request.alertConfig.variant,value:e.request.alertConfig.value}}),Oa)(Ea);o.a.render(r.a.createElement(s.a,{store:oa().store},r.a.createElement(c.a,{loading:null,persistor:oa().persistor},r.a.createElement(fa,null),r.a.createElement(Sa,null),r.a.createElement(It,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){"use strict";var n=a(203);a.d(t,"DynamicForm",(function(){return n.a}));var r=a(195);a.d(t,"initialDynamicFormStates",(function(){return r.a}));var i=a(37);a.d(t,"FormConfig",(function(){return i.a}));var o=a(196);a.o(o,"DateTimeQuestion")&&a.d(t,"DateTimeQuestion",(function(){return o.DateTimeQuestion})),a.o(o,"RadioButtonQuestion")&&a.d(t,"RadioButtonQuestion",(function(){return o.RadioButtonQuestion})),a.o(o,"ReferenceQuestion")&&a.d(t,"ReferenceQuestion",(function(){return o.ReferenceQuestion})),a.o(o,"TextAreaQuestion")&&a.d(t,"TextAreaQuestion",(function(){return o.TextAreaQuestion})),a.o(o,"TextboxQuestion")&&a.d(t,"TextboxQuestion",(function(){return o.TextboxQuestion}));a(41),a(197);var s=a(198);a.d(t,"TextAreaQuestion",(function(){return s.a}));var c=a(199);a.d(t,"TextboxQuestion",(function(){return c.a}));var l=a(200);a.d(t,"ReferenceQuestion",(function(){return l.a}));var u=a(201);a.d(t,"DateTimeQuestion",(function(){return u.a}));var d=a(202);a.d(t,"RadioButtonQuestion",(function(){return d.a}))},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(10),r=function e(){Object(n.a)(this,e),this.formValidators={require:"required",minLength:"minLength",maxLength:"maxLength",email:"email"},this.inputTypeDef={button:"button",checkbox:"checkbox",color:"color",date:"date",datetime:"datetime",datetimeLocal:"datetime-local",email:"email",file:"file",hidden:"hidden",image:"image",month:"month",number:"number",password:"password",radio:"radio",range:"range",reset:"reset",search:"search",submit:"submit",tel:"tel",text:"text",time:"time",url:"url",week:"week"},this.questionControlType={textbox:"textbox",textarea:"textarea",dropdown:"dropdown",radiobutton:"radiobutton",reference:"reference",datetime:"datetime"}}},41:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(10),r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e),this.value=void 0,this.key=void 0,this.label=void 0,this.required=void 0,this.order=void 0,this.controlType=void 0,this.type=void 0,this.options=void 0,this.validators=void 0,this.multiple=void 0,this.rows=void 0,this.readonly=void 0,this.searchBar=void 0,this.serverUrl=void 0,this.displayField=void 0,this.listFields=void 0,this.filterCondition=void 0,this.value=t.value,this.key=t.key||"",this.label=t.label||"",this.required=!!t.required,this.order=void 0===t.order?1:t.order,this.controlType=t.controlType||"",this.type=t.type||"",this.options=t.options||[],this.validators=t.validators||[],this.multiple=!!t.multiple,this.rows=void 0===t.rows?1:t.rows,this.readonly=!!t.readonly,this.searchBar=!!t.searchBar,this.serverUrl=t.serverUrl||"",this.displayField=t.displayField||"",this.listFields=t.listFields||[],this.filterCondition=t.filterCondition||""}},74:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(272),r={timeout:Number("100000")||1e4,baseURL:"https://fullerton-healthcare-app.herokuapp.com",headers:{common:{"Content-Type":"application/json",Accept:"application/json"}},paramsSerializer:function(e){return n.stringify(e,{indices:!1})}}}},[[242,1,2]]]);
//# sourceMappingURL=main.afccb77b.chunk.js.map